<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="forum-item.html">
<link rel="import" href="forum-header.html">
<link rel="import" href="dialog-question.html">
<link rel="import" href="forum-answers.html">

<dom-module id="forum-app">

	<template>
		<style>
			:host{
				width: 100%;
				height: 100%;
				font-size: 16px;
			}

			.container {
			    display: flex;
			    flex-wrap: wrap;
			}

			.add-forum {
				height: 60px;
				align-self: auto;
				width: 20%;
				border-bottom: 1px solid #424242;

			}

			.header-forum {

				height: 60px;
				align-self: auto;
				width: 80%;
				border-bottom: 1px solid #424242;

	
			}

			.forum-list {
				flex:1;
				border:1px solid green;
			}

			.forum-sub-container {
				width: 80%;
				border:1px solid yellow;
			}

			.forum-answers {
				flex:0 0 100%;
				margin: 10px 0;
				border: 3px solid black;
			}

			.forum-response {
				flex:0 0 100%;
				margin: 10px 0;
				border: 3px solid purple;
			}

		</style>

		<div class="container">

			<div class="add-forum">
				<dialog-question forums="{{forums}}"></dialog-question>
			</div>

			<div class="header-forum">
				<forum-header id="header" name="{{name}}"></forum-header>
			</div>

			<div class="forum-list">

				<forum-item id="forumItem" index="{{index}}" forums="[[forums]]"></forum-item>
			</div>

			<div class="forum-sub-container">
				<div class="forum-answers">
					<forum-answers answers="{{answers}}"></forum-answers>
				</div>

				<div class="forum-response">
					here goes response input
				</div>
			</div>
		</div>

	</template>


	<script>
		(function appShell(customElements){
			class ForumApp extends Polymer.Element {

				static get is() {
					return 'forum-app';
				}


				ready(){
					super.ready();
					console.log(this.$.forumItem);


				}



				static get properties() {
					return {
						forums: {
							type:Array,
							value:[
								{name:"Forum de prueba",question:"pregunta de prueba",answers:['asdasd','asdasdasd']},
								{name:"Forum de prueba 2",question:"pregunta de prueba",answers:[]},
								{name:"Forum de prueba 3",question:"pregunta de prueba",answers:[]},
								{name:"Forum de prueba 4",question:"pregunta de prueba",answers:[]},
								{name:"Forum de prueba 5",question:"pregunta de prueba",answers:[]},
								{name:"Forum de prueba 6",question:"pregunta de prueba",answers:[]},
								{name:"Forum de prueba 7",question:"pregunta de prueba",answers:[]},
								{name:"Forum de prueba 8",question:"pregunta de prueba",answers:[]},
								{name:"Forum de prueba 9",question:"pregunta de prueba",answers:[]},

							],
							reflectToAttribute:true,
							observer:'_updateForums'


						},

						index: {
							type:Number,
							notify:true,
							reflectToAttribute:true,
							observer:'_forumItemSelected'
						},

						name: {
							type:String,
							notify:true,
							value:"sin foro seleccionado",
							observer:'_headerChanged'

						},

						answers:{

							type:Array,
							notify:true,
							observer:'_answerChanged',
							reflectToAttribute:true,
							value:[]
						}						
					}
				}

				_forumItemSelected(){
					console.log("forum item has changed....",this.index)
					console.log(this.$.header.name )
					//change header on index change
					this.name = this.forums[this.index].name
					this.answers = this.forums[this.index].answers
				}

				_headerChanged(){
					console.log("header has changed");
				}


				_updateForums() {
					console.log("forums has changed papu")
				}

				_answerChanged() {
					console.log("answers has changed papu")
				}





			}
			customElements.define(ForumApp.is,ForumApp);
		})(window.customElements);
	</script>



</dom-module>
