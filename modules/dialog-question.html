<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">
<link rel="import" href="/bower_components/paper-input/paper-input.html">

<dom-module id="dialog-question">

  <template>
    <paper-button raised on-tap="_openDialog">Nuevo foro</paper-button>

    <paper-dialog id="dialog" forums="{{forums}}">
      <h2>Agrega un foro</h2>

      <paper-input id="titleVal" value="{{title}}" label="Titulo"></paper-input>
      <paper-input id="questionVal" value="{{question}}" label="á¹”regunta"></paper-input>

  	  <div class="buttons">
  	    <paper-button dialog-dismiss>Decline</paper-button>
  	    <paper-button dialog-confirm autofocus on-tap="_saveQuestion">Accept</paper-button>
  	  </div>

  	</paper-dialog>


  </template>

  <script>
  (function dialog() {
    'use strict';
    class DomElement extends Polymer.Element {

      static get is() { return "dialog-question"; }

      static get properties(){
        return {

          title:{
            type: String

          },

          question:{
            type: String
          },

          forums:{
            type:Array,
            reflectToAttribute:true,
            notify:true,
            observer:'_forumsChanged'

          },

          clone:{
            type:Array,
            notify:true,
            reflectToAttribute:true,
            value:[]
          }


        };
      }

      _openDialog(event){
        this.clone = []
        this.$.dialog.open();
        for(let i of this.forums){
          this.clone.push(i);
        }


      }

      _saveQuestion(event){
        let tmp = {
          name:this.title,
          question:this.question,
          answers:[]
        }
        this.clone.push(tmp)
        this.forums = this.clone;
        this._cleanInputs();

      }

      _cleanInputs(){
        console.log("cleaned");
        this.title = ""
        this.question = ""
      }

      _forumsChanged() {
        console.log("forum has changed")
      }
    }
    customElements.define(DomElement.is, DomElement);

  })();

  </script>

</dom-module>
